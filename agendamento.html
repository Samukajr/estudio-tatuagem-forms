<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Agendamento & Briefing - Estúdio de Tatuagem</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <div class="container">
        <header class="header">
            <div class="logo">
                <i class="fas fa-dragon"></i>
                <h1>Agendamento & Briefing</h1>
            </div>
            <p class="subtitle">Conte-nos sobre seu projeto</p>
        </header>

        <main class="main-content">
            <div class="form-container">
                <div class="form-header">
                    <h2><i class="fas fa-calendar-check"></i> Formulário de Agendamento</h2>
                    <p>Preencha os dados abaixo para agendarmos sua sessão</p>
                </div>

                <form id="agendamentoForm">
                    <h3 style="color: var(--primary-color); margin-bottom: 20px;">
                        <i class="fas fa-user"></i> Dados Pessoais
                    </h3>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="nome">Nome Completo <span class="required">*</span></label>
                            <input type="text" id="nome" name="nome" required>
                        </div>

                        <div class="form-group">
                            <label for="cpf">CPF <span class="required">*</span></label>
                            <input type="text" id="cpf" name="cpf" maxlength="14" 
                                   onkeyup="formatCPF(this)" required>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="email">E-mail <span class="required">*</span></label>
                            <input type="email" id="email" name="email" required>
                        </div>

                        <div class="form-group">
                            <label for="telefone">Telefone/WhatsApp <span class="required">*</span></label>
                            <input type="tel" id="telefone" name="telefone" 
                                   onkeyup="formatPhone(this)" required>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="dataNascimento">Data de Nascimento <span class="required">*</span></label>
                            <input type="date" id="dataNascimento" name="dataNascimento" required>
                        </div>

                        <div class="form-group">
                            <label for="idade">Idade</label>
                            <input type="number" id="idade" name="idade" readonly>
                        </div>
                    </div>

                    <hr style="margin: 30px 0; border: none; border-top: 2px solid #eee;">

                    <h3 style="color: var(--primary-color); margin-bottom: 20px;">
                        <i class="fas fa-palette"></i> Informações do Projeto
                    </h3>

                    <div class="form-group">
                        <label for="tipoServico">Tipo de Serviço <span class="required">*</span></label>
                        <select id="tipoServico" name="tipoServico" required>
                            <option value="">Selecione...</option>
                            <option value="tatuagem-pequena">Tatuagem Pequena (até 5cm)</option>
                            <option value="tatuagem-media">Tatuagem Média (5-15cm)</option>
                            <option value="tatuagem-grande">Tatuagem Grande (acima de 15cm)</option>
                            <option value="tatuagem-fechamento">Fechamento (braço/perna completa)</option>
                            <option value="piercing-orelha">Piercing - Orelha</option>
                            <option value="piercing-nariz">Piercing - Nariz</option>
                            <option value="piercing-boca">Piercing - Boca/Língua</option>
                            <option value="piercing-corpo">Piercing - Corpo (umbigo, mamilo, etc)</option>
                            <option value="micropigmentacao">Micropigmentação</option>
                            <option value="cobertura">Cobertura (Cover Up)</option>
                            <option value="remocao">Remoção a Laser</option>
                        </select>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="localCorpo">Local do Corpo <span class="required">*</span></label>
                            <input type="text" id="localCorpo" name="localCorpo" 
                                   placeholder="Ex: Braço esquerdo, costas, orelha..." required>
                        </div>

                        <div class="form-group">
                            <label for="tamanhoEstimado">Tamanho Estimado</label>
                            <input type="text" id="tamanhoEstimado" name="tamanhoEstimado" 
                                   placeholder="Ex: 10x10cm, meia manga...">
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="estilo">Estilo Desejado</label>
                        <select id="estilo" name="estilo">
                            <option value="">Selecione...</option>
                            <option value="tradicional">Tradicional/Old School</option>
                            <option value="realismo">Realismo</option>
                            <option value="blackwork">Blackwork</option>
                            <option value="aquarela">Aquarela</option>
                            <option value="oriental">Oriental</option>
                            <option value="geometrica">Geométrica</option>
                            <option value="minimalista">Minimalista/Fine Line</option>
                            <option value="tribal">Tribal</option>
                            <option value="lettering">Lettering</option>
                            <option value="maori">Maori/Polinésia</option>
                            <option value="new-school">New School</option>
                            <option value="outro">Outro</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="descricao">Descrição Detalhada do Projeto <span class="required">*</span></label>
                        <textarea id="descricao" name="descricao" rows="6" 
                                  placeholder="Descreva sua ideia em detalhes: tema, elementos, cores, significado pessoal, etc." 
                                  required></textarea>
                    </div>

                    <div class="form-group">
                        <label>Já possui referências/imagens?</label>
                        <div class="checkbox-group">
                            <input type="radio" id="refSim" name="temReferencias" value="sim">
                            <label for="refSim" style="font-weight: normal;">Sim, vou enviar por WhatsApp/E-mail</label>
                        </div>
                        <div class="checkbox-group">
                            <input type="radio" id="refNao" name="temReferencias" value="nao">
                            <label for="refNao" style="font-weight: normal;">Não, gostaria de sugestões do artista</label>
                        </div>
                        <div class="checkbox-group">
                            <input type="radio" id="refFlash" name="temReferencias" value="flash">
                            <label for="refFlash" style="font-weight: normal;">Quero escolher um flash do estúdio</label>
                        </div>
                    </div>

                    <div class="form-group">
                        <label>Cores</label>
                        <div class="checkbox-group">
                            <input type="radio" id="corColorida" name="cores" value="colorida">
                            <label for="corColorida" style="font-weight: normal;">Colorida</label>
                        </div>
                        <div class="checkbox-group">
                            <input type="radio" id="corPretoBranco" name="cores" value="preto-branco">
                            <label for="corPretoBranco" style="font-weight: normal;">Preto e Branco</label>
                        </div>
                        <div class="checkbox-group">
                            <input type="radio" id="corSombreado" name="cores" value="sombreado">
                            <label for="corSombreado" style="font-weight: normal;">Sombreado</label>
                        </div>
                    </div>

                    <div class="form-group">
                        <label>Esta é sua primeira tatuagem/piercing?</label>
                        <div class="checkbox-group">
                            <input type="radio" id="primeiraSim" name="primeira" value="sim">
                            <label for="primeiraSim" style="font-weight: normal;">Sim</label>
                        </div>
                        <div class="checkbox-group">
                            <input type="radio" id="primeiraNao" name="primeira" value="nao">
                            <label for="primeiraNao" style="font-weight: normal;">Não</label>
                        </div>
                    </div>

                    <hr style="margin: 30px 0; border: none; border-top: 2px solid #eee;">

                    <h3 style="color: var(--primary-color); margin-bottom: 20px;">
                        <i class="fas fa-clock"></i> Preferências de Agendamento
                    </h3>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="dataPreferida">Data Preferida</label>
                            <input type="date" id="dataPreferida" name="dataPreferida">
                        </div>

                        <div class="form-group">
                            <label for="horarioPreferido">Horário Preferido</label>
                            <select id="horarioPreferido" name="horarioPreferido">
                                <option value="">Selecione...</option>
                                <option value="manha">Manhã (9h - 12h)</option>
                                <option value="tarde">Tarde (13h - 17h)</option>
                                <option value="noite">Noite (18h - 21h)</option>
                                <option value="flexivel">Horário Flexível</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="artista">Preferência de Artista</label>
                        <select id="artista" name="artista">
                            <option value="">Sem preferência</option>
                            <option value="artista1">Artista 1 - Especialidade: Realismo</option>
                            <option value="artista2">Artista 2 - Especialidade: Old School</option>
                            <option value="artista3">Artista 3 - Especialidade: Fine Line</option>
                            <option value="piercer">Piercer Profissional</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="orcamento">Orçamento Esperado</label>
                        <select id="orcamento" name="orcamento">
                            <option value="">Selecione...</option>
                            <option value="ate-300">Até R$ 300</option>
                            <option value="300-600">R$ 300 - R$ 600</option>
                            <option value="600-1000">R$ 600 - R$ 1.000</option>
                            <option value="1000-2000">R$ 1.000 - R$ 2.000</option>
                            <option value="acima-2000">Acima de R$ 2.000</option>
                            <option value="aberto">Aberto a negociação</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="observacoes">Observações Adicionais</label>
                        <textarea id="observacoes" name="observacoes" rows="4" 
                                  placeholder="Alguma informação adicional que julgar importante..."></textarea>
                    </div>

                    <div class="form-group">
                        <label>Como nos conheceu?</label>
                        <select id="comoConheceu" name="comoConheceu">
                            <option value="">Selecione...</option>
                            <option value="instagram">Instagram</option>
                            <option value="facebook">Facebook</option>
                            <option value="google">Google/Busca Online</option>
                            <option value="indicacao">Indicação de amigo/familiar</option>
                            <option value="tiktok">TikTok</option>
                            <option value="cliente">Já sou cliente</option>
                            <option value="outro">Outro</option>
                        </select>
                    </div>

                    <div class="checkbox-group" style="margin-top: 30px;">
                        <input type="checkbox" id="aceiteTermos" required>
                        <label for="aceiteTermos" style="font-weight: normal;">
                            Li e concordo com os <a href="#" style="color: var(--accent-color);">termos de uso</a> e 
                            <a href="#" style="color: var(--accent-color);">política de privacidade</a> 
                            <span class="required">*</span>
                        </label>
                    </div>

                    <div class="form-actions">
                        <button type="button" class="btn btn-back" onclick="goBack()">
                            <i class="fas fa-arrow-left"></i> Voltar
                        </button>
                        <button type="submit" class="btn btn-submit">
                            <i class="fas fa-paper-plane"></i> Enviar Agendamento
                        </button>
                    </div>
                </form>
            </div>
        </main>

        <footer class="footer">
            <p>&copy; 2026 Estúdio de Tatuagem & Piercing</p>
        </footer>
    </div>

    <!-- Firebase -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
    <script src="firebase-config.js"></script>
    
    <script src="script.js"></script>
    <script>
        // Inicializar Firebase
        initFirebase();
        // Calcular idade automaticamente
        document.getElementById('dataNascimento').addEventListener('change', function() {
            const birthDate = this.value;
            if (birthDate) {
                const age = calculateAge(birthDate);
                document.getElementById('idade').value = age;
                
                if (age < 18) {
                    showErrorMessage('Menores de 18 anos precisam de autorização dos pais/responsáveis e presença no estúdio.');
                }
            }
        });

        // Submissão do formulário
        document.getElementById('agendamentoForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            if (!validateForm('agendamentoForm')) {
                showErrorMessage('Por favor, preencha todos os campos obrigatórios.');
                return;
            }

            const formData = {
                nome: document.getElementById('nome').value,
                cpf: document.getElementById('cpf').value,
                email: document.getElementById('email').value,
                telefone: document.getElementById('telefone').value,
                dataNascimento: document.getElementById('dataNascimento').value,
                idade: document.getElementById('idade').value,
                tipoServico: document.getElementById('tipoServico').value,
                localCorpo: document.getElementById('localCorpo').value,
                tamanhoEstimado: document.getElementById('tamanhoEstimado').value,
                estilo: document.getElementById('estilo').value,
                descricao: document.getElementById('descricao').value,
                temReferencias: document.querySelector('input[name="temReferencias"]:checked')?.value,
                cores: document.querySelector('input[name="cores"]:checked')?.value,
                primeira: document.querySelector('input[name="primeira"]:checked')?.value,
                dataPreferida: document.getElementById('dataPreferida').value,
                horarioPreferido: document.getElementById('horarioPreferido').value,
                artista: document.getElementById('artista').value,
                orcamento: document.getElementById('orcamento').value,
                observacoes: document.getElementById('observacoes').value,
                comoConheceu: document.getElementById('comoConheceu').value,
                formId: generateFormId()
            };

            // Validar CPF
            if (!validateCPF(formData.cpf)) {
                showErrorMessage('CPF inválido. Por favor, verifique.');
                return;
            }

            // Validar email
            if (!validateEmail(formData.email)) {
                showErrorMessage('E-mail inválido. Por favor, verifique.');
                return;
            }

            // Salvar dados
            await saveFormData('agendamento', formData);

            showSuccessMessage(`Agendamento recebido com sucesso! ID: ${formData.formId}. Entraremos em contato em breve pelo telefone/WhatsApp informado.`);

            // Limpar formulário após 3 segundos
            setTimeout(() => {
                this.reset();
                window.location.href = 'index.html';
            }, 3000);
        });
    </script>
    <footer class="copyright-footer" style="text-align: center; padding: 15px; border-top: 1px solid #eee; font-size: 0.8rem; color: #666; margin-top: 40px;">
        &copy; 2026 <strong>Opedroquetatua</strong> - Todos os direitos reservados
    </footer>
</body>
</html>
